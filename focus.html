<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>flocus | Pure Black SaaS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        :root {
            --accent-purple: #7c4dff;
            --glass-white: rgba(255, 255, 255, 0.03);
            --ambient-bg: url('https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=2560');
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000;
            color: #ffffff;
            height: 100vh;
            overflow: hidden;
            transition: background 0.8s ease, all 0.5s ease;
        }

        .glass-ui {
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(40px);
            -webkit-backdrop-filter: blur(40px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        body.mode-ambient {
            background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), var(--ambient-bg);
            background-size: cover;
            background-position: center;
        }

        .timer-pill {
            @apply px-6 py-2.5 rounded-xl border border-white/10 text-[10px] font-bold uppercase tracking-widest transition-all duration-300;
            background: var(--glass-white);
        }
        
        .timer-pill:hover { @apply border-white/30 bg-white/10; transform: translateY(-1px); }

        .timer-pill.active {
            background: linear-gradient(135deg, var(--accent-purple), #6366f1);
            border-color: var(--accent-purple);
            box-shadow: 0 8px 20px rgba(124, 77, 255, 0.3);
            opacity: 1 !important;
        }

        .nav-active {
            background: #ffffff;
            color: #000000;
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.2);
        }

        .streak-animate { animation: streak-pop 1s forwards; }
        @keyframes streak-pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.5); filter: brightness(2) drop-shadow(0 0 15px #ffab00); }
            100% { transform: scale(1); }
        }

        .settings-sidebar-item {
            @apply flex items-center gap-3 w-full p-3.5 rounded-xl transition-all text-sm font-medium text-white/40;
        }
        .settings-sidebar-item.active { @apply bg-white/10 text-white; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.1); }

        .hidden { display: none !important; }
        .modal-enter { animation: modalIn 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
        @keyframes modalIn { from { opacity: 0; transform: scale(0.98); } to { opacity: 1; transform: scale(1); } }
        
        input, textarea { background: rgba(255, 255, 255, 0.03) !important; border: 1px solid rgba(255, 255, 255, 0.08) !important; }
        input:focus, textarea:focus { border-color: var(--accent-purple) !important; outline: none; }
        
        .drag-handle { cursor: grab; }
        .drag-handle:active { cursor: grabbing; }
    </style>
</head>
<body class="p-10 flex flex-col justify-between">

    <header class="flex justify-between items-start z-10">
        <div class="logo">
            <h1 class="text-3xl font-black tracking-tighter">flocus</h1>
            <p class="text-[9px] tracking-[0.5em] font-bold opacity-30 uppercase pl-1">Minimal Suite</p>
        </div>

        <div id="ambient-panel" class="hidden glass-ui p-8 flex flex-col items-center w-72 rounded-[3rem]">
            <span class="text-[10px] font-bold opacity-30 mb-2 uppercase tracking-[0.2em]">Session</span>
            <div class="timer-text text-6xl font-black tracking-tight mb-8">25:00</div>
            <button onclick="toggleTimer()" class="timer-toggle-btn bg-white text-black w-full py-4 rounded-2xl text-[10px] font-black uppercase tracking-widest hover:brightness-90 transition-all">Start</button>
        </div>

        <div id="quote-area" class="text-right max-w-[280px]">
            <p id="display-quote" class="text-xs font-light leading-relaxed italic opacity-40">"Life begins at the end of your comfort zone."</p>
        </div>
    </header>

    <main class="flex-grow flex flex-col items-center justify-center relative">
        <div id="view-home" class="text-center">
            <h2 class="text-base font-light mb-4 opacity-40 tracking-widest uppercase text-white/60">
                Enjoy your evening, <span id="display-name" class="font-bold opacity-100 text-white">User</span>.
            </h2>
            <div id="live-clock" class="text-[150px] md:text-[220px] font-black leading-none tracking-tighter text-white">00:00</div>
        </div>

        <div id="view-focus" class="hidden text-center flex flex-col items-center modal-enter">
            <div onclick="openModal('modal-priorities')" class="cursor-pointer flex items-center gap-3 mb-10 bg-white/5 px-6 py-2.5 rounded-xl border border-white/5 hover:bg-white/10 transition-all group">
                <h2 id="focus-heading" class="text-sm font-semibold opacity-60 group-hover:opacity-100 tracking-wide transition-opacity">What do you want to focus on?</h2>
                <i class="fa-solid fa-pen text-[10px] opacity-30 group-hover:opacity-100 transition-opacity"></i>
            </div>
            
            <div class="flex gap-3 mb-12">
                <button onclick="setTimerMode('focus')" id="m-focus" class="timer-pill active">Focus</button>
                <button onclick="setTimerMode('short')" id="m-short" class="timer-pill">Short Break</button>
                <button onclick="setTimerMode('long')" id="m-long" class="timer-pill">Long Break</button>
            </div>

            <div class="timer-text text-[140px] md:text-[180px] font-black leading-none tracking-tighter mb-12 text-white">25:00</div>

            <div class="flex items-center gap-6">
                <button onclick="toggleTimer()" class="timer-toggle-btn bg-[#7c4dff] px-20 py-4 rounded-2xl font-black text-xs tracking-widest uppercase shadow-xl transition-all hover:scale-105 active:scale-95">Start</button>
                <button onclick="resetTimer()" class="w-14 h-14 flex items-center justify-center rounded-2xl border border-white/10 opacity-30 hover:opacity-100 hover:bg-white/5 transition-colors">
                    <i class="fa-solid fa-rotate-right"></i>
                </button>
            </div>
        </div>
    </main>

    <footer class="flex justify-center items-center relative z-10">
        <div id="streak-display" class="absolute left-0 flex items-center gap-2 bg-white/5 px-4 py-2 rounded-xl border border-white/5 opacity-80 transition-all">
            <i class="fa-solid fa-fire text-orange-500 text-sm"></i>
            <span id="streak-count" class="text-xs font-black tracking-tighter">0</span>
        </div>

        <nav class="glass-ui rounded-full p-1.5 flex items-center gap-2 border border-white/5">
            <button id="nav-ambient" onclick="switchMode('ambient')" class="w-10 h-10 rounded-full flex items-center justify-center opacity-30 hover:opacity-100 transition-all"><i class="fa-solid fa-leaf text-xs"></i></button>
            <button id="nav-home" onclick="switchMode('home')" class="nav-active w-10 h-10 rounded-full flex items-center justify-center transition-all"><i class="fa-solid fa-house text-xs"></i></button>
            <button id="nav-focus" onclick="switchMode('focus')" class="w-10 h-10 rounded-full flex items-center justify-center opacity-30 hover:opacity-100 transition-all"><i class="fa-solid fa-circle-dot text-xs"></i></button>
        </nav>

        <div class="absolute right-0 flex items-center gap-2">
            <button onclick="toggleFullScreen()" class="opacity-30 hover:opacity-100 transition-all p-2" title="Toggle Fullscreen">
                <i class="fa-solid fa-expand text-xl text-white" id="maximize-icon"></i>
            </button>
            <button onclick="openModal('modal-settings')" class="opacity-30 hover:opacity-100 transition-all p-2" title="Settings">
                <i class="fa-solid fa-sliders text-xl text-white"></i>
            </button>
        </div>
    </footer>

    <div id="modal-priorities" class="fixed inset-0 bg-black/90 hidden items-center justify-center p-6 z-[100] backdrop-blur-sm">
        <div class="glass-ui w-full max-w-lg rounded-[2.5rem] p-12 shadow-2xl modal-enter">
            <div class="flex justify-between items-center mb-8">
                <button onclick="closeModal('modal-priorities')"><i class="fa-solid fa-xmark text-xl opacity-40 hover:opacity-100"></i></button>
                <button onclick="resetTasks()" class="text-red-500 text-[10px] font-bold uppercase tracking-widest border border-red-500/30 px-3 py-1 rounded-lg hover:bg-red-500/10 transition-all">Reset</button>
            </div>
            <div id="taskList" class="space-y-4 mb-8">
                <div class="relative flex items-center group bg-white/5 rounded-2xl border border-white/5 overflow-hidden">
                    <div class="flex items-center justify-center w-14 h-14 border-r border-white/5"><div class="w-5 h-5 border-2 border-white/20 rounded-lg"></div></div>
                    <input type="text" oninput="syncFocusTask()" placeholder="Type your priority..." class="task-input flex-grow bg-transparent p-5 text-sm text-white focus:outline-none">
                    <div class="task-timer text-[9px] font-black text-indigo-400 uppercase tracking-tighter opacity-0 group-first:opacity-100 pr-2"></div>
                    <div class="drag-handle flex items-center justify-center w-12 h-14 opacity-20 group-hover:opacity-60"><i class="fa-solid fa-grip-vertical text-lg text-white"></i></div>
                </div>
            </div>
            <button onclick="addTask()" class="w-full py-4 rounded-2xl border border-dashed border-white/10 text-[10px] font-black uppercase tracking-widest opacity-40 hover:opacity-100 transition-all">+ Add Priority</button>
        </div>
    </div>

    <div id="modal-settings" class="fixed inset-0 bg-black/95 hidden z-[100] modal-enter">
        <div class="flex h-full">
            <div class="w-80 border-r border-white/5 p-10 flex flex-col">
                <div class="flex items-center justify-between mb-12"><h3 class="text-xl font-black">Settings</h3><button onclick="closeModal('modal-settings')" class="opacity-30 hover:opacity-100"><i class="fa-solid fa-xmark text-xl text-white"></i></button></div>
                <nav class="space-y-2 flex-grow">
                    <button onclick="switchSettings('account')" class="settings-sidebar-item active" id="menu-account"><i class="fa-solid fa-user-circle"></i> Account</button>
                    <button onclick="switchSettings('quotes')" class="settings-sidebar-item" id="menu-quotes"><i class="fa-solid fa-quote-left"></i> Quotes</button>
                    <button onclick="switchSettings('theme')" class="settings-sidebar-item" id="menu-theme"><i class="fa-solid fa-palette"></i> Ambient Theme</button>
                </nav>
            </div>
            <div class="flex-grow p-24 overflow-y-auto">
                <div id="content-account" class="max-w-xl">
                    <h2 class="text-4xl font-black mb-16">Profile Settings</h2>
                    <div class="bg-white/5 p-10 rounded-[2.5rem] border border-white/5">
                        <label class="block text-[10px] font-black uppercase tracking-[0.2em] opacity-30 mb-6">Display Name</label>
                        <input type="text" id="name-input" oninput="updateUserName()" placeholder="Enter your name" class="w-full bg-black border border-white/10 rounded-2xl p-5 text-white">
                    </div>
                </div>
                <div id="content-quotes" class="hidden max-w-xl">
                    <h2 class="text-4xl font-black mb-16">Custom Quotes</h2>
                    <div class="bg-white/5 p-10 rounded-[2.5rem] border border-white/5">
                        <label class="block text-[10px] font-black uppercase tracking-[0.2em] opacity-30 mb-6">Inspiration Text</label>
                        <textarea id="quote-input" oninput="updateQuote()" placeholder="Write your quote..." class="w-full bg-black border border-white/10 rounded-2xl p-5 text-white h-32 resize-none"></textarea>
                    </div>
                </div>
                <div id="content-theme" class="hidden max-w-xl">
                    <h2 class="text-4xl font-black mb-16">Ambient Experience</h2>
                    <div class="bg-white/5 p-10 rounded-[2.5rem] border border-white/5">
                        <label class="block text-[10px] font-black uppercase tracking-[0.2em] opacity-30 mb-6">Background Image URL</label>
                        <input type="text" id="wallpaper-input" placeholder="Paste image URL..." class="w-full bg-black border border-white/10 rounded-2xl p-5 text-white mb-6">
                        <button onclick="saveWallpaper()" class="bg-[#7c4dff] px-8 py-3 rounded-xl font-bold text-xs uppercase tracking-widest">Apply Wallpaper</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentMode = 'home', timerSeconds = 1500, isRunning = false, timerInterval = null, elapsedSeconds = 0, streakCount = 0;

        // --- MAXIMIZE LOGIC ---
        function toggleFullScreen() {
            const icon = document.getElementById('maximize-icon');
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.error(`Fullscreen Error: ${err.message}`);
                });
                icon.classList.replace('fa-expand', 'fa-compress');
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                    icon.classList.replace('fa-compress', 'fa-expand');
                }
            }
        }
        // Listener to sync icon if user exits via 'Esc' key
        document.addEventListener('fullscreenchange', () => {
            const icon = document.getElementById('maximize-icon');
            if (!document.fullscreenElement) {
                icon.classList.replace('fa-compress', 'fa-expand');
            }
        });

        // --- Drag and Drop ---
        const taskList = document.getElementById('taskList');
        Sortable.create(taskList, { handle: '.drag-handle', animation: 200, ghostClass: 'sortable-ghost', onEnd: syncFocusTask });

        function formatSpentTime(totalSeconds) {
            const hrs = Math.floor(totalSeconds / 3600), mins = Math.floor((totalSeconds % 3600) / 60);
            return hrs > 0 ? `${hrs} hr ${mins} min` : `${mins} min`;
        }

        function syncFocusTask() {
            const inputs = document.querySelectorAll('.task-input'), focusHeading = document.getElementById('focus-heading'), modalTimers = document.querySelectorAll('.task-timer');
            let activeTask = "What do you want to focus on?";
            modalTimers.forEach(el => el.textContent = "");
            for (let i = 0; i < inputs.length; i++) {
                if (inputs[i].value.trim() !== "") {
                    activeTask = inputs[i].value;
                    modalTimers[i].textContent = elapsedSeconds > 0 ? `Spent ${formatSpentTime(elapsedSeconds)}` : "";
                    break;
                }
            }
            focusHeading.textContent = (isRunning || elapsedSeconds > 0) ? `Active Session on ${activeTask}` : activeTask;
        }

        function toggleTimer() {
            if (isRunning) clearInterval(timerInterval);
            else {
                timerInterval = setInterval(() => {
                    if (timerSeconds > 0) { timerSeconds--; elapsedSeconds++; syncFocusTask(); updateTimerDisplay(); }
                    else { clearInterval(timerInterval); isRunning = false; if (currentMode === 'focus') checkAndIncrementStreak(); }
                }, 1000);
            }
            isRunning = !isRunning;
            document.querySelectorAll('.timer-toggle-btn').forEach(b => b.textContent = isRunning ? 'Pause' : 'Start');
        }

        function checkAndIncrementStreak() {
            const today = new Date().toISOString().split('T')[0], lastDate = localStorage.getItem('flocus_last_streak_date');
            if (lastDate !== today) { streakCount++; localStorage.setItem('flocus_streak_count', streakCount); localStorage.setItem('flocus_last_streak_date', today); updateStreakDisplay(); triggerStreakAnimation(); }
        }

        function switchMode(mode) {
            currentMode = mode; document.body.classList.toggle('mode-ambient', mode === 'ambient');
            document.getElementById('view-home').classList.toggle('hidden', mode !== 'home');
            document.getElementById('view-focus').classList.toggle('hidden', mode !== 'focus');
            document.getElementById('ambient-panel').classList.toggle('hidden', mode !== 'ambient');
            document.getElementById('quote-area').classList.toggle('hidden', mode === 'ambient');
            ['nav-home', 'nav-ambient', 'nav-focus'].forEach(id => document.getElementById(id).classList.remove('nav-active'));
            document.getElementById('nav-' + mode).classList.add('nav-active');
            if (mode === 'focus') syncFocusTask();
        }

        // --- Basic UI Sync ---
        function updateClock() { const now = new Date(); document.getElementById('live-clock').textContent = `${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`; }
        setInterval(updateClock, 1000); updateClock();
        function updateTimerDisplay() { const m = Math.floor(timerSeconds / 60), s = timerSeconds % 60; document.querySelectorAll('.timer-text').forEach(el => el.textContent = `${m}:${s.toString().padStart(2, '0')}`); }
        function setTimerMode(mode) { document.querySelectorAll('.timer-pill').forEach(b => b.classList.remove('active')); document.getElementById('m-' + mode).classList.add('active'); timerSeconds = mode === 'focus' ? 1500 : (mode === 'short' ? 300 : 900); updateTimerDisplay(); }
        function openModal(id) { document.getElementById(id).classList.remove('hidden'); document.getElementById(id).classList.add('flex'); }
        function closeModal(id) { document.getElementById(id).classList.add('hidden'); document.getElementById(id).classList.remove('flex'); }
        function updateUserName() { const n = document.getElementById('name-input').value || 'User'; document.getElementById('display-name').textContent = n; localStorage.setItem('flocus_user_name', n); }
        function updateQuote() { const q = document.getElementById('quote-input').value || '"Life begins at the end of your comfort zone."'; document.getElementById('display-quote').textContent = q.includes('"') ? q : `"${q}"`; localStorage.setItem('flocus_custom_quote', q); }
        function saveWallpaper() { const url = document.getElementById('wallpaper-input').value; if (url) { document.documentElement.style.setProperty('--ambient-bg', `url('${url}')`); localStorage.setItem('flocus_ambient_wallpaper', url); } }
        function addTask() {
            const row = document.createElement('div'); row.className = "relative flex items-center group bg-white/5 rounded-2xl border border-white/5 overflow-hidden";
            row.innerHTML = `<div class="flex items-center justify-center w-14 h-14 border-r border-white/5"><div class="w-5 h-5 border-2 border-white/20 rounded-lg"></div></div><input type="text" oninput="syncFocusTask()" placeholder="Type your priority..." class="task-input flex-grow bg-transparent p-5 text-sm text-white focus:outline-none"><div class="task-timer text-[9px] font-black text-indigo-400 uppercase tracking-tighter opacity-0 group-first:opacity-100 pr-2"></div><div class="drag-handle flex items-center justify-center w-12 h-14 opacity-20 group-hover:opacity-60"><i class="fa-solid fa-grip-vertical text-lg text-white"></i></div>`;
            taskList.appendChild(row);
        }
        function resetTasks() { resetTasksInner(); elapsedSeconds = 0; syncFocusTask(); }
        function resetTasksInner() { taskList.innerHTML = `<div class="relative flex items-center group bg-white/5 rounded-2xl border border-white/5 overflow-hidden"><div class="flex items-center justify-center w-14 h-14 border-r border-white/5"><div class="w-5 h-5 border-2 border-white/20 rounded-lg"></div></div><input type="text" oninput="syncFocusTask()" placeholder="Type your priority..." class="task-input flex-grow bg-transparent p-5 text-sm text-white focus:outline-none"><div class="task-timer text-[9px] font-black text-indigo-400 uppercase tracking-tighter opacity-0 group-first:opacity-100 pr-2"></div><div class="drag-handle flex items-center justify-center w-12 h-14 opacity-20"><i class="fa-solid fa-grip-vertical text-lg text-white"></i></div></div>`; }
        function switchSettings(section) { ['account', 'quotes', 'theme'].forEach(s => { document.getElementById('content-' + s).classList.add('hidden'); document.getElementById('menu-' + s).classList.remove('active'); }); document.getElementById('content-' + section).classList.remove('hidden'); document.getElementById('menu-' + section).classList.add('active'); }
        function updateStreakDisplay() { document.getElementById('streak-count').textContent = streakCount; }
        function triggerStreakAnimation() { const s = document.getElementById('streak-display'); s.classList.add('streak-animate'); setTimeout(() => s.classList.remove('streak-animate'), 1000); }
        function resetTimer() { clearInterval(timerInterval); isRunning = false; setTimerMode('focus'); }

        window.onload = () => {
            const savedName = localStorage.getItem('flocus_user_name'); if (savedName) { document.getElementById('name-input').value = savedName; document.getElementById('display-name').textContent = savedName; }
            const savedQuote = localStorage.getItem('flocus_custom_quote'); if (savedQuote) { document.getElementById('quote-input').value = savedQuote; updateQuote(); }
            const savedWallpaper = localStorage.getItem('flocus_ambient_wallpaper'); if (savedWallpaper) { document.documentElement.style.setProperty('--ambient-bg', `url('${savedWallpaper}')`); document.getElementById('wallpaper-input').value = savedWallpaper; }
            const savedStreak = localStorage.getItem('flocus_streak_count'); if (savedStreak) { streakCount = parseInt(savedStreak); updateStreakDisplay(); }
            updateTimerDisplay();
        };
    </script>
</body>
</html>
